program = cmfd 

#===============================================================================
# PETSc files
#===============================================================================

include ${PETSC_DIR}/conf/variables
include ${PETSC_DIR}/conf/rules

#===============================================================================
# Object Files
#===============================================================================

include OBJECTS

#===============================================================================
# User Options
#===============================================================================

DEBUG       = yes 

#===============================================================================
# Compiler Options
#===============================================================================

  F90FLAGS = -I${PETSC_DIR}/include/finclude -ffree-form
  LDFLAGS = -L../lib/gfortran -lxmlparse

# Set compiler flags for debugging

ifeq ($(DEBUG),yes)
  F90FLAGS += -g 
  LDFLAGS  += -g
  F90FLAGS += -pedantic -std=f2008 -fbacktrace -fbounds-check \
              -ffpe-trap=invalid,zero,overflow,underflow
endif

#===============================================================================
# Targets
#===============================================================================

all:	$(program)
$(program): $(objects) chkopts
	${FLINKER} $(objects) -o $@ $(LDFLAGS) ${PETSC_SNES_LIB}

#===============================================================================
# Dependencies
#===============================================================================

include DEPENDENCIES
